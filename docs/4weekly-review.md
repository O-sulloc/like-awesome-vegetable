# 🥬 멋쟁이채소처럼

## 3주차 팀회고

## 🚀 팀 구성원, 개인 별 역할

아이디어톤 팀 구성원을 기재해 주시고,<br>
그 주의 팀원이 어떤 역할을 맡아서 개발을 진행했는지 구체적으로 작성해 주세요. 🙂

- 장서윤(PM/개발): PM, 프로젝트 일정 관리, 기능구현 (결제, 포인트, 보증금, 환불, 마이페이지(기업/농가), 관리자 정산, 경매 최저가 게시글 조회, 사용자 포인트 조회, 예외처리)
- 김예진(CTO/개발): 경매 / 모집 리스트 조회 (인기순, 이벤트 시작순), 알림 (경매 / 모집 종료시, 기업 / 농가 좋아요) 기능 구현
- 서태건(인프라/개발): 데이터베이스 분리, 에러 처리(농가 경매, 기업 모집)
- 전수진(기획/개발): 인프런 학습
- 김정현(개발): 전자 계약 리팩터링, 전자 계약 완료시 경매/모집 마감, 경매/모집 게시글 단건 조회
- 최아영(개발): 기업/농가 리스트 조회, 단건 상세 조회
- 한건주(개발): 기업 모집/농가 경매 게시글 좋아요, 사용자 간 쪽지 기능, 지역별 농산물 평균 거래량/입찰가 조회,

## 🗣️ 팀 내부 회의 진행 회차 및 일자

일주일 간 진행한 내부 회의 횟수와 일자, 진행 방법, 불참 인원을 위와 같이 작성해 주세요.

- 1회차) 2022.02.08 디스코드 라이브
    - FE 관련 내부 회의
- 2회차) 2022.02.09 디스코드 라이브
    - 발표 자료 역할 분담
    - 프로젝트 로고 1차 시안 확인

## 🗒️ 현재까지 개발 과정 요약

현재까지 개발을 진행하면서 ‘기술적으로 새로 알게된 점, 어려웠던 점, 아쉬운 점' 등을 요약하여 작성해 주세요 🙂<br>
팀원 각자 현재 구현하고 있는 것을 작성해 주세요. :)

- 장서윤(PM/개발)
    - 새로 알게된 점
        - nativeQuery를 사용하는 경우 Object로 반환하기 때문에 interface getter로 만들어서 받아줘야한다
        - builder 패턴에 메서드 이름을 지정해서 여러개 사용하는 경우 class도 함께 지정해줘야한다.
    - 어려웠던 점
        - 검색을 성능 개선을 위해 like 쿼리 대신 match against 함수를 사용했다.
          match 함수는 비교적 빠른 검색이 가능하나 테이블에 index를 추가해줘야하는데
          JPA에서 match 함수를 사용할 경우 create를 해서 테이블이 새로 생성될 때 테이블 index를 어떻게 넣어줘야 하는지 더 알아봐야할 것 같다
    - 아쉬운 점
        - FE를 하다가 BE를 30일날 시작해서 많은 기능을 예외처리까지 10일안에 구현하기 힘들었고, 구현에만 집중하다보니 적용한 내용을 복기하거나 중요한 디테일을 잡지 못해서 아쉽다.
- 김예진(CTO/개발)
    - 새로 알게된 점
        - 지연로딩을 사용함으로 쿼리 하나가 지나치게 많은 쿼리문을 수행하게 하는 것을 막아 성능 저하 이슈를 예방할 수 있다.
    - 어려웠던 점
        - 경매/모집 게시글에서 인기순으로 조회할 때 게시글 테이블과 좋아요 테이블을 join을 left join으로 join하고 좋아요 순으로 정렬하는 쿼리를 짜는데에 시간을 많이 쏟았다.
    - 아쉬운 점
        - 영속성 컨텍스트, 트랜잭션, 지연로딩을 더 파보고 정리할 시간이 부족했던 점이 아쉽다.
- 서태건(인프라/개발)
    - 새로 알게된 점
        - 이미지를 s3에 올리는 동작과 restful의 흐름을 알게 되었고 ec2인스턴스에 rds를 연결하는 법을 알았다.
    - 어려웠던 점
        - 팀원들은 오류가 안 나는데 나만 오류가 생기고 로컬에서는 되는데 배포 환경에서는 안되고 돼야 되는데 안되니까 당황스러우면서 어떻게 해결해야 될지 막막하고 어려웠다.
    - 아쉬운 점
        - 이번 프로젝트 하면서 했던 내용을 다시 한다고 하면 하루 이틀이면 다 할 것 같은데 쉬운 기능을 너무 오래 걸려서 했던 것 같다.
- 전수진(기획/개발)
    - 새로 알게된 점
        - 싱글톤 컨테이너와 컴포넌트 스캔에 대해 알게되었다. 싱글톤 컨테이너는 싱글톤 패턴의 문제점을 해결하면서 ,객체 인스턴스를 싱글톤(1개만 생성)으로 관리한다는것을 알게되었다. 스프링 컨테이너 덕분에 이미 만들어진 객체를 공유해서 효율적으로 재사용할 수 있지만 주의점도 필요하다. 특정 클라이언트에 의존적인 필드가 있으면 안되고 스프링 빈의 필드에 공유 값을 설정하면 큰 장애가 발생할수도 있다고 한다.
    - 어려웠던 점
        - 인스턴스가 같은지 테스트 하는 코드를 짰는데 원래 같아야 하는 인스턴스가 다 다르게 나와서 이 부분을 다시 확인해봐야 될것같다.
    - 아쉬운 점
        - 아직 전체적으로 보기에 어려운 부분도 많고 진행도 더딘것 같은데 꾸준하게 반복적으로 학습해야겠다.
- 김정현(개발)
    - 새로 알게된 점
        - `LazyInitializationException: could not initialize proxy` 에러가 계속 발생했다. 프록시 객체를 통해 지연 로딩되는 객체를 가져오려고할 때 이미 세션이 사려져서 발생하는 에러였다. `FetchType.EAGER` 즉시 로딩으로 읽어오니 에러는 헤결되었다. 하지만 장서윤 팀원의 피드백으로 좋은 방법이 아님을 알게 되었다. 즉시 로딩 시, 엔티티 간의 관계가 복잡해질 수록 조인으로 인한 성능 저하가 우려되기 때문이다. 따라서 지연 조회 시점까지 세션을 유지시키기 위해 `@Transactional` 어노테이션을 사용하였다. 그 결과 정상적으로 조회할 수 있었다.
        - JPA의 Query Methods만으로는 데이터 조회의 한계가 있었다. 따라서 직접 NativeQuery를 작성하여 데이터를 조회할 수 있었다.
    - 어려웠던 점
        - 영속성 및 지연 로딩, 즉시 로딩 추가 공부가 필요해보인다.
    - 아쉬운 점
        - 전자 계약 구현에 몰두하다 스스로 시간 분배를 잘못한 부분이 아쉽다.
        - 전자 계약 진행시 동시성 처리를 못한 부분이 아쉽다. 시간이 나면 꼭 관련 부분을 공부해서 적용해보고 싶다.
        - 프로젝트 초반에 구현했던 뷰를 적용하지 못한 부분이 아쉽다. 하지만 MVC 패턴으로 FE를 체험하는 것 보다, 백엔드 개발자로서 명확한 REST API를 정의하는 것이 프론트엔드와 소통하는 데 더 도움이 됨을 깨달았다.
- 최아영(개발)
    - 새로 알게된 점
        - 특정 컬럼만 가져오고 싶다면 인터페이스를 선언해주고 메서드를 통해 가져올 수 있다는 것을 알게 되었다.
    - 어려웠던 점
        - 다른 팀원들의 코드를 모르는 상태에서 필요한 부분만 가져다 쓰려니 어려웠다. 팀원들의 코드도 어느 정도 이해하고 있어야 하는 것 같다.
    - 아쉬운 점
        - 뭐든 제대로 공부하지 못하고 적용만 시키고 넘어간 것 같아서 아쉽다.
- 한건주(개발)
    - 새로 알게된 점
        - Like 쿼리의 성능을 개선하기 위해서 인덱싱 후 Match 쿼리를 사용한다
        - 1대1 매핑된 엔티티에 동시에 데이터가 접근되면 에러가 발생한다. `Transactional`을 걸어서 데이터 접근이 한 번에 하나씩 가능하도록 설정한다.
        - 클래스에서 `@Builder` 를 적용하지 않고 생성자에서 `@Builder` 를 적용시키는 방법을 알게 되었다.
    - 어려웠던 점
        - DB에서 JOIN 후 쿼리를 작성하는 내용을 이해하기 어려웠다.
    - 아쉬운 점
        - 동시성 처리를 해결하고 싶었으나 제대로 해결하지 못했다.
        - JPQL을 제대로 이해하지 못해 적용하지 못했다.

## 📸 개발 결과물 공유

---

Gitlab Repository URL: [I5E2 멋쟁이채소처럼](https://gitlab.com/i5e2/like-awesome-vegetable/-/tree/main)

![Untitled](https://user-images.githubusercontent.com/58171107/218076375-6e617353-3ec7-4f5f-b460-f5f353b0c846.png)

